# ü§ñ Local Agent Builder v2.0.0

A visual workflow builder for creating AI agents with **real tool use capabilities** that run entirely on your local machine using Ollama.

![Status](https://img.shields.io/badge/status-production-green) ![Version](https://img.shields.io/badge/version-2.0.0-blue) ![License](https://img.shields.io/badge/license-MIT-yellow)

## ‚ö° Quick Start (2 Steps!)

1. **Install Ollama & a model** (one-time setup)
   ```bash
   # Download Ollama from: https://ollama.ai/download
   ollama pull llama3.1:8b
   ```

2. **Run the launcher**
   - **Windows**: Double-click `start.bat`
   - **Mac/Linux**: `./start.sh`
   - **Or**: `npm start`

**That's it!** The launcher auto-installs dependencies, checks everything, and opens your browser. ‚ú®

---

## üìã Table of Contents
- [Features](#-features)
- [Prerequisites](#-prerequisites)
- [Installation](#-installation)
- [Running the Application](#-running-the-application)
- [Usage Guide](#-usage-guide)
- [Node Types](#-node-types)
- [Model Compatibility](#-model-compatibility)
- [Troubleshooting](#-troubleshooting)
- [Project Structure](#-project-structure)
- [Development](#-development)

---

## ‚ú® Features

### Core Capabilities
- **üé® Visual Workflow Builder**: Intuitive drag-and-drop interface for creating AI agent workflows
- **üîß Tool-Enabled Agents**: Local models can use tools to access external information
- **üìö Knowledge Base**: Upload documents (PDF, MD, TXT, CSV, JSON, XML) for agents to search and reference
- **üåê Web Search**: Agents can fetch current information from Wikipedia API
- **üîä Text-to-Speech**: Built-in voice output with 15+ voice options (male/female, US/UK/AU accents)
- **üíæ State Management**: Pass data between workflow nodes with variables
- **üîÑ Control Flow**: If/else conditions, while loops, and user approval gates
- **ü§ñ Local AI**: Powered by Ollama - **no API keys or cloud dependencies required**
- **üåô Dark Mode**: Beautiful dark theme for comfortable extended use
- **üí¨ Chat History**: Agents maintain conversation context across interactions

### Node Types (15+)
- **Core**: Start, Agent, End, Note
- **Tools**: Knowledge Base, Database, File Search, Guardrails, MCP, Voice (TTS)
- **Logic**: If/Else, While Loop, User Approval
- **Data**: Transform, Set State, Prompt Injection
- **External I/O**: External Input, External Output

---

## üì¶ Prerequisites

Before installing, ensure you have the following installed on your system:

### Required Software

1. **Node.js** (v18 or higher)
   - Download: [https://nodejs.org/](https://nodejs.org/)
   - Verify installation: `node --version`

2. **npm** (comes with Node.js)
   - Verify installation: `npm --version`

3. **Ollama** (for local AI models)
   - Download: [https://ollama.ai/download](https://ollama.ai/download)
   - Verify installation: `ollama --version`

4. **Python 3.8+** (for Text-to-Speech)
   - Download: [https://www.python.org/downloads/](https://www.python.org/downloads/)
   - Verify installation: `python --version` or `python3 --version`

5. **edge-tts** (Python package for TTS)
   ```bash
   pip install edge-tts
   # or
   pip3 install edge-tts
   ```

### Recommended Models

Install at least one model with tool support:

```bash
# Recommended: Good balance of size and capability
ollama pull llama3.1:8b

# Alternative: Larger, more capable
ollama pull gpt-oss:latest

# Alternative: Smaller, faster
ollama pull llama3.2:latest
```

**Note**: Models with tool support (üîß) can use Knowledge Base, Web Search, and other tools. See [Model Compatibility](#-model-compatibility) for details.

---

## üîß Installation

### Quick Start (Automated)

**The easiest way to get started:**

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd local-agent-builder-main
   ```

2. **Run the launcher**
   
   **Windows:**
   - Double-click `start.bat`
   - Or run: `npm start`
   
   **Mac/Linux:**
   ```bash
   chmod +x start.sh
   ./start.sh
   # Or: npm start
   ```

**That's it!** The launcher will:
- ‚úÖ Check all prerequisites (Node.js, Python, Ollama)
- ‚úÖ Auto-install missing dependencies (npm packages, edge-tts)
- ‚úÖ Verify Ollama is running and has models
- ‚úÖ Start both frontend and TTS servers
- ‚úÖ Open your browser automatically

### Manual Installation (Advanced)

If you prefer manual control:

**Step 1: Clone the Repository**
```bash
git clone <repository-url>
cd local-agent-builder-main
```

**Step 2: Install Dependencies**
```bash
npm install
cd agent-builder
npm install
cd ..
```

**Step 3: Install Python TTS**
```bash
pip install edge-tts
```

**Step 4: Verify Ollama**
```bash
ollama list
```

---

## üöÄ Running the Application

### Option 1: Automated Launcher (Recommended)

**Windows:**
```bash
start.bat
# Or: npm start
```

**Mac/Linux:**
```bash
./start.sh
# Or: npm start
```

The launcher handles everything automatically!

### Option 2: Manual Start

**Start everything at once:**
```bash
npm run dev
```

**Or start separately (for debugging):**

Terminal 1 - Frontend:
```bash
cd agent-builder
npm run dev
```

Terminal 2 - TTS Server:
```bash
node tts-server.js
```

### Access the Application
- **Frontend**: [http://localhost:5173](http://localhost:5173)
- **TTS Server**: [http://localhost:3001](http://localhost:3001)
- **Ollama API**: [http://localhost:11434](http://localhost:11434)

---

## üìñ Usage Guide

### Creating Your First Workflow

1. **Open the Application**
   - Navigate to `http://localhost:5173`
   - You'll see the workflow builder interface

2. **Add Nodes**
   - Drag nodes from the left sidebar onto the canvas
   - Start with: **Start** ‚Üí **Agent** ‚Üí **Voice** ‚Üí **End**

3. **Configure Agent Node**
   - Click on the Agent node
   - Select a model (look for üîß icon for tool support)
   - Add instructions (e.g., "You are a helpful assistant")

4. **Connect Nodes**
   - Drag from the output handle of one node to the input handle of another
   - Workflow executes from Start to End following connections

5. **Add Input**
   - Type your message in the input box at the top
   - Example: "What is quantum computing?"

6. **Run Workflow**
   - Click the green **‚ñ∂ Run** button
   - Watch execution logs in real-time
   - Hear voice output if Voice node is connected

### Using Knowledge Base

1. **Add Knowledge Base Node**
   - Drag "Knowledge Base" from Tools section

2. **Upload Documents**
   - Click the Knowledge Base node
   - Click "Browse & Select Documents"
   - Select PDF, MD, TXT, or other supported files

3. **Connect to Agent**
   - Drag from Knowledge Base **üìö KB** handle to Agent **üìö KB** handle
   - Agent can now search your documents

4. **Ask Questions**
   - Input: "What does the document say about X?"
   - Agent will search and cite sources

### Using Multiple Agents

Create multi-agent workflows:
```
Start ‚Üí Agent1 (Research) ‚Üí Voice1 ‚Üí Prompt ‚Üí Agent2 (Summarize) ‚Üí Voice2 ‚Üí End
```

Each agent can have:
- Different models
- Different instructions
- Different voices
- Different tools

---

## üìö Node Types

### Core Nodes
- **Start**: Entry point for workflows
- **Agent**: AI agent with model selection and tool support
- **End**: Exit point for workflows
- **Note**: Add comments and documentation to your workflow

### Tool Nodes
- **Knowledge Base**: Upload and search documents (PDF, MD, TXT, CSV, JSON, XML)
- **Database**: Connect to external databases (planned)
- **File Search**: Search local file system (planned)
- **Guardrails**: Add safety checks and content filtering
- **MCP**: Model Context Protocol integration
- **Voice (TTS)**: Text-to-speech output with 15+ voices

### Logic Nodes
- **If/Else**: Conditional branching based on conditions
- **While Loop**: Repeat actions until condition is met
- **User Approval**: Pause workflow for human approval

### Data Nodes
- **Transform**: Transform data between nodes
- **Set State**: Store variables for later use
- **Prompt**: Inject custom prompts into the workflow

### External I/O Nodes
- **External Input**: Receive input from external sources
- **External Output**: Send output to external systems

---

## üîß Model Compatibility

### Models with Tool Support (üîß)

These models can use Knowledge Base, Web Search, and other tools:

| Model | Size | Tool Support | Best For |
|-------|------|--------------|----------|
| `llama3.1:8b` | 4.9GB | ‚úÖ Yes | **Recommended** - Best balance |
| `llama3.2:latest` | 2.0GB | ‚úÖ Yes | Smaller systems |
| `gpt-oss:latest` | 13.8GB | ‚úÖ Yes | Maximum capability |
| `qwen2.5:7b` | ~4GB | ‚úÖ Yes | Multilingual support |
| `deepseek-coder` | ~7GB | ‚úÖ Yes | Coding tasks |

### Models WITHOUT Tool Support

These work for basic chat but cannot use tools:

| Model | Size | Tool Support | Best For |
|-------|------|--------------|----------|
| `mistral:latest` | 4.4GB | ‚ùå No | Fast responses |
| `phi3:latest` | ~2GB | ‚ùå No | Very small systems |
| `gemma:latest` | ~5GB | ‚ùå No | Basic tasks |

**Visual Indicator**: Models with tool support show a üîß wrench icon in the dropdown.

---

## üêõ Troubleshooting

### Ollama Not Running

**Symptom**: Red banner "Ollama Not Running"

**Solution**:
```bash
# Check if Ollama is running
ollama list

# If not, start it:
# Windows: Ollama starts automatically
# Mac/Linux: ollama serve
```

### No Models Available

**Symptom**: Yellow banner "No Models Installed"

**Solution**:
```bash
# Install a model
ollama pull llama3.1:8b

# Verify installation
ollama list
```

### TTS Not Working

**Symptom**: No voice output, errors in console

**Solution**:
1. Check if TTS server is running on port 3001
2. Verify edge-tts is installed:
   ```bash
   pip install edge-tts
   ```
3. Restart TTS server:
   ```bash
   node tts-server.js
   ```

### Knowledge Base Not Working

**Symptom**: Agent doesn't use uploaded documents

**Solution**:
1. Ensure you're using a tool-capable model (look for üîß icon)
2. Check that Knowledge Base is connected to Agent's **üìö KB** handle
3. Try switching to `llama3.1:8b` or `gpt-oss:latest`

### Port Already in Use

**Symptom**: Error "Port 5173 already in use"

**Solution**:
```bash
# Windows
netstat -ano | findstr :5173
taskkill /PID <PID> /F

# Mac/Linux
lsof -ti:5173 | xargs kill -9
```

### Workflow Not Executing

**Symptom**: Nothing happens when clicking Run

**Solution**:
1. Check that all nodes are connected properly
2. Ensure Start node exists and is connected
3. Check browser console for errors (F12)
4. Verify Ollama is running and has models

---

## üìÅ Project Structure

```
local-agent-builder-main/
‚îú‚îÄ‚îÄ README.md                           # This file
‚îú‚îÄ‚îÄ MODEL_COMPATIBILITY.md              # Model tool support guide
‚îú‚îÄ‚îÄ UI_UX_SPECIFICATION.md              # UI/UX design specification
‚îú‚îÄ‚îÄ openai-agent-builder-reference.md   # OpenAI reference docs
‚îÇ
‚îú‚îÄ‚îÄ agent-builder/                      # üé® Main React application
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/                # React components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes/                 # Custom node components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Inspector.tsx          # Node configuration panel
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NodePalette.tsx        # Drag-and-drop palette
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OllamaStatusBanner.tsx # Ollama health check
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Builder.tsx            # Main workflow builder
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WorkflowsList.tsx      # Workflow management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ workflowExecutor.ts    # Workflow execution engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ollamaService.ts       # Ollama API client
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ollamaHealthCheck.ts   # Health monitoring
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ defaultWorkflow.ts     # Default workflow template
‚îÇ   ‚îú‚îÄ‚îÄ package.json                   # App dependencies
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.ts                 # Vite configuration
‚îÇ
‚îú‚îÄ‚îÄ tts-server.js                       # Text-to-Speech HTTP server
‚îú‚îÄ‚îÄ edge-tts-nossl.py                   # TTS Python wrapper
‚îú‚îÄ‚îÄ package.json                        # Root dependencies
‚îÇ
‚îú‚îÄ‚îÄ tests/                              # Playwright tests
‚îî‚îÄ‚îÄ temp-audio/                         # Temporary TTS audio files
```

---

## üîß Development

### Tech Stack

**Frontend:**
- **React 19** - UI framework
- **TypeScript** - Type safety
- **Vite** - Build tool and dev server
- **TailwindCSS 4** - Styling
- **ReactFlow** - Visual workflow editor
- **Zustand** - State management

**Backend:**
- **Node.js + Express** - TTS server
- **Ollama** - Local LLM inference
- **edge-tts** - Microsoft Edge TTS

### Key Files

| File | Purpose |
|------|---------|
| `agent-builder/src/pages/Builder.tsx` | Main workflow builder UI |
| `agent-builder/src/components/Inspector.tsx` | Node configuration panel |
| `agent-builder/src/services/workflowExecutor.ts` | Workflow execution engine |
| `agent-builder/src/services/ollamaService.ts` | Ollama API integration |
| `tts-server.js` | Text-to-Speech HTTP server |

### Running Tests

```bash
# Run Playwright tests
cd agent-builder
npm run test

# Run tests with UI
npm run test:ui

# Run tests in headed mode
npm run test:headed

# Debug tests
npm run test:debug
```

### Building for Production

```bash
# Build the application
cd agent-builder
npm run build

# Preview production build
npm run preview
```

The build output will be in `agent-builder/dist/`.

### Environment Variables

No environment variables required! Everything runs locally.

---

## üéØ Use Cases

### 1. Research Assistant
Create an agent that searches your documents and the web to answer questions with cited sources.

**Example Workflow:**
```
Start ‚Üí Agent (Research) + Knowledge Base ‚Üí Voice ‚Üí End
```

### 2. Multi-Agent Workflows
Chain multiple agents together, each with different specializations and voices.

**Example Workflow:**
```
Start ‚Üí Agent1 (Analyze) ‚Üí Voice1 ‚Üí Prompt ‚Üí Agent2 (Summarize) ‚Üí Voice2 ‚Üí End
```

### 3. Document Analysis
Upload PDFs/documents and have agents extract insights, summarize, or answer questions.

**Example Workflow:**
```
Start ‚Üí Knowledge Base ‚Üí Agent (Analyzer) ‚Üí Transform ‚Üí Voice ‚Üí End
```

### 4. Voice Assistants
Build conversational agents with natural voice output in multiple languages and accents.

**Example Workflow:**
```
Start ‚Üí Agent (Chat) ‚Üí Voice (Female, UK) ‚Üí End
```

### 5. Automated Workflows
Create complex workflows with conditional logic, loops, and state management.

**Example Workflow:**
```
Start ‚Üí Agent ‚Üí If/Else ‚Üí [Path A: Voice] / [Path B: Transform] ‚Üí End
```

---

## üöÄ Deployment

### Local Deployment
The application is designed to run locally. No server deployment needed.

### Network Access (Optional)
To access from other devices on your network:

1. Find your local IP:
   ```bash
   # Windows
   ipconfig
   
   # Mac/Linux
   ifconfig
   ```

2. Start the application:
   ```bash
   npm run dev
   ```

3. Access from other devices:
   ```
   http://YOUR_LOCAL_IP:5173
   ```

**Note**: Ollama must be running on the same machine.

---

## üìä System Requirements

### Minimum Requirements
- **CPU**: 4 cores
- **RAM**: 8GB
- **Storage**: 10GB free space
- **OS**: Windows 10+, macOS 11+, Linux

### Recommended Requirements
- **CPU**: 8+ cores
- **RAM**: 16GB+
- **Storage**: 20GB+ free space
- **GPU**: Optional (for faster inference)

### Model Size Considerations

| Model | RAM Required | Inference Speed |
|-------|--------------|-----------------|
| `llama3.2:latest` (2GB) | 4GB | Fast |
| `llama3.1:8b` (4.9GB) | 8GB | Medium |
| `gpt-oss:latest` (13.8GB) | 16GB | Slower |

---

## ü§ù Contributing

Contributions are welcome! Here's how to get started:

1. **Fork the repository**
2. **Create a feature branch**: `git checkout -b feature/amazing-feature`
3. **Make your changes**
4. **Test thoroughly**: `npm run test`
5. **Commit**: `git commit -m 'Add amazing feature'`
6. **Push**: `git push origin feature/amazing-feature`
7. **Open a Pull Request**

### Code Style
- Follow existing TypeScript/React patterns
- Use meaningful variable names
- Add comments for complex logic
- Update documentation for new features

---

## üìÑ License

MIT License - feel free to use this project for personal or commercial purposes.

---

## üôè Acknowledgments

- **[Ollama](https://ollama.ai/)** - Local LLM inference
- **[edge-tts](https://github.com/rany2/edge-tts)** - Text-to-speech
- **[ReactFlow](https://reactflow.dev/)** - Visual workflow editor
- **[Vite](https://vitejs.dev/)** - Build tool
- **[TailwindCSS](https://tailwindcss.com/)** - Styling
- Inspired by OpenAI's Agent Builder

---

## üìû Support

- **Issues**: [GitHub Issues](https://github.com/your-repo/issues)
- **Discussions**: [GitHub Discussions](https://github.com/your-repo/discussions)
- **Documentation**: See files in this repository

---

## üó∫Ô∏è Roadmap

### v2.1 (Planned)
- [ ] Database integration
- [ ] File search functionality
- [ ] Enhanced guardrails
- [ ] Workflow templates
- [ ] Export/import workflows

### v2.2 (Planned)
- [ ] Multi-user support
- [ ] Cloud sync (optional)
- [ ] Advanced debugging tools
- [ ] Performance optimizations
- [ ] Mobile responsive improvements

---

**Made with ‚ù§Ô∏è for the local AI community**

**Version:** 2.0.0 | **Last Updated:** October 17, 2025
